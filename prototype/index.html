<!doctype html>
<html lang="ja-JP">
<head>
    <meta charset="UTF-8">
    <meta content="" name="copyright">
    <meta content="" name="description">
    <meta name="viewport" content="user-scalable=yes" />
    <meta name="format-detection" content="telephone=no" />
    <title>Learn JavaScript</title>
    <link rel="stylesheet" href="http://www.css-reset.com/css/meyer.css" />
    <style>
        #js-view {
            width: 500px;
            height: 500px;
            margin: 20px auto;
            position: relative;
            z-index: 1;
        }
        span {
            width: 10px;
            height: 10px;
            position: absolute;
            z-index: 10;
            background: #000;
        }
    </style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript">
        // -------------------------
        //　　内　容
        // -------------------------
        // 1.座標ランダムの四角を300個生成する
        // 2.HTMLに生成した四角を描画する
        // 3.ディレイさせながら一箇所に集中させる。

        $(function () {

            var t = $('#js-view');

            // 要素を生成するクラス（オリジナルのオブジェクト）
            function Obj(){
                Obj.prototype.create = function(num){
                    for(i=1; i<=num; i++) {
                        t.append('<span style="left:'+Math.round(Math.random()*100)+'%; top:'+Math.round(Math.random()*100)+'%;" >&nbsp;</span>');
                    }
                }
            };

            // アニメーションするクラス（オリジナルのオブジェクト）
            function Animate(){
                Animate.prototype.move = function(left,top,speed) {
                    t.find('span').each(function(i) {
                        $(this).delay(50 * i).animate({
                            'left': left+'px',
                            'top': top+'px'
                        },speed);
                        console.log('run');

                    });
                }
            }

            // インスタンス化
            var addObj = new Obj();
            addObj.create(300);

            // インスタンス化
            var animate = new Animate();
            animate.move(100, 100, 2000);

        });
    </script>
</head>
<body>
    <div id="js-view"></div>
</body>
</html>
